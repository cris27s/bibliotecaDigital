<div class="prestamos-container">
  <h1 class="titulo">Pr√©stamos Registrados</h1>

  <div class="acciones-globales">
    <button (click)="abrirFormularioNuevo()">‚ûï A√±adir Pr√©stamo</button>
  </div>

  <div class="prestamos-lista">
    <div
      *ngFor="let prestamo of prestamos"
      class="prestamo-card"
      [class.seleccionado]="prestamo === prestamoSeleccionado"
      (click)="seleccionarPrestamo(prestamo)"
    >
      <h3>Pr√©stamo #{{ prestamo.id_prestamo }}</h3>
      <p><strong>ID Libro:</strong> {{ prestamo.id_libro }}</p>
      <p><strong>ID Usuario:</strong> {{ prestamo.id_usuario }}</p>
      <p><strong>Fecha Pr√©stamo:</strong> {{ prestamo.fecha_prestamo }}</p>
      <p><strong>Fecha Devoluci√≥n:</strong> {{ prestamo.fecha_devolucion }}</p>
      <p><strong>Estado:</strong> {{ prestamo.estado }}</p>
      <div class="acciones">
        <button (click)="abrirFormularioEditar(); $event.stopPropagation()">Editar</button>
        <button (click)="borrarPrestamo(); $event.stopPropagation()">üóë Borrar</button>
      </div>
    </div>
  </div>

  <!-- Formulario Editar -->
  <div class="modal" *ngIf="mostrarFormularioEditar">
    <div class="modal-content">
      <h2>Editar Pr√©stamo</h2>

      <label>Fecha Pr√©stamo:</label>
      <input type="date" [(ngModel)]="editFechaPrestamo" />

      <label>Fecha Devoluci√≥n:</label>
      <input type="date" [(ngModel)]="editFechaDevolucion" />

      <label>Estado:</label>
      <select [(ngModel)]="editEstado">
        <option value="activo">Activo</option>
        <option value="devuelto">Devuelto</option>
        <option value="atrasado">Atrasado</option>
      </select>

      <div class="botones-modal">
        <button (click)="guardarCambios()">Guardar</button>
        <button (click)="cancelarEdicion()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Formulario A√±adir -->
  <div class="modal" *ngIf="mostrarFormularioNuevo">
    <div class="modal-content">
      <h2>A√±adir Pr√©stamo</h2>

      <label>ID Libro:</label>
      <input [(ngModel)]="nuevoPrestamo.id_libro" />

      <label>ID Usuario:</label>
      <input [(ngModel)]="nuevoPrestamo.id_usuario" />

      <label>Fecha Pr√©stamo:</label>
      <input type="date" [(ngModel)]="nuevoPrestamo.fecha_prestamo" />

      <label>Fecha Devoluci√≥n:</label>
      <input type="date" [(ngModel)]="nuevoPrestamo.fecha_devolucion" />

      <label>Estado:</label>
      <select [(ngModel)]="nuevoPrestamo.estado">
        <option value="activo">Activo</option>
        <option value="devuelto">Devuelto</option>
        <option value="atrasado">Atrasado</option>
      </select>

      <div class="botones-modal">
        <button (click)="guardarNuevoPrestamo()">Guardar</button>
        <button (click)="cancelarNuevoPrestamo()">Cancelar</button>
      </div>
    </div>
¬†¬†</div>
</div>